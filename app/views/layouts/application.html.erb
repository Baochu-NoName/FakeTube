<!DOCTYPE html>
<html>
  <head>
    <title>FakeTube</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload', crossorigin: '' %>
    <%= stylesheet_link_tag 'video-js.min', 'data-turbolinks-track': 'reload' %>
    <%= stylesheet_link_tag 'style', 'data-turbolinks-track': 'reload', crossorigin: ''%>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload', crossorigin: ''%>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </head>
  <body>
  <style>
     /* Show the controls (hidden at the start by default) */
    .video-js .vjs-control-bar {
      display: -webkit-box;
      display: -webkit-flex;
      display: -ms-flexbox;
      display: flex;
    }

    a,
    a:hover,
    a:visited {
      color: #76DAFF;
    }
  </style>
  <%= render 'style/header'%>
    <%= render 'layouts/alert' %>
  <div class="card p-3 mb-2">
     <%= yield %>
   </div>
  <%= render 'style/footer'%>
    <script>

      (function() {
        let onpageLoad = localStorage.getItem("theme") || "";
        let element = document.body;
        let videoCard = document.querySelector(".card");
        let checkBox = document.getElementById("flexSwitchCheckChecked");
        let cat_table = document.querySelector("#table-container");
        element.classList.add(onpageLoad);
        videoCard.classList.add(onpageLoad);
        cat_table.classList.add(onpageLoad);
        if(onpageLoad && onpageLoad === "dark-mode" && !checkBox.checked){
            checkBox.checked = true;
        }else{
            checkBox.checked = false;
        }

      })();

function themeToggle() {
  let element = document.body;
   let cat_table = document.querySelector("#table-container");
  let videoCard = document.querySelector(".card");
  element.classList.toggle("dark-mode");
  videoCard.classList.toggle("dark-mode");
  cat_table.classList.toggle("dark-mode");

  let theme = localStorage.getItem("theme");
  if (theme && theme === "dark-mode") {
    localStorage.setItem("theme", "light");
  } else {
    localStorage.setItem("theme", "dark-mode");
  }
}
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  </body> 
</html>
